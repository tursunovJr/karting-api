from app import create_app
from extensions import db
from api.tracks.models import Coordinate
from datetime import datetime, timedelta

TEST_KARTING_UUID = "00000000-0000-0000-0000-000000000000"
TEST_KARTING_TIMEDELTA = timedelta(seconds=2)
TEST_KARTING_COORDINATES = (
    (56.16903045107535, 37.51474515686034),
    (56.16913370427291, 37.51463049242495),
    (56.16921488503319, 37.51459763536452),
    (56.169305044108796, 37.51462311635015),
    (56.16942400887079, 37.51474985072612),
    (56.16955457040061, 37.514995943403214),
    (56.16965894448347, 37.51505964586734),
    (56.169759577290066, 37.51497985014914),
    (56.16985816537565, 37.51478797188207),
    (56.16999072844458, 37.51446500326226),
    (56.17017567599067, 37.514236757158),
    (56.17034598901241, 37.51404825806757),
    (56.17045036093519, 37.5140348470225),
    (56.170715687209544, 37.51414079427859),
    (56.17079013100867, 37.51424875319144),
    (56.170789008741416, 37.514443883897286),
    (56.17073775850179, 37.51454916060112),
    (56.17057414075156, 37.514652371166434),
    (56.17042639258929, 37.51474882792866),
    (56.17034671077456, 37.51487086843883),
    (56.17026650425558, 37.5151488586425),
    (56.170155580949164, 37.515230666017466),
    (56.169965670319094, 37.51532473593727),
    (56.169858390933996, 37.515376864280434),
    (56.169805882499105, 37.51543772846433),
    (56.16980850118997, 37.51556379228802),
    (56.169922587885615, 37.51569319701404),
    (56.17002625324335, 37.51580119219944),
    (56.17004196529529, 37.51594794848462),
    (56.16999071405442, 37.51600896873973),
    (56.16992150606544, 37.516055236845226),
    (56.16986651368217, 37.51620074668429),
    (56.16985903171914, 37.516404594569416),
    (56.16994862995015, 37.516548099276406),
    (56.17006078309709, 37.51657990970402),
    (56.17020821036151, 37.516515741195235),
    (56.17029473258776, 37.51657809273229),
    (56.170333264242636, 37.51676061207581),
    (56.17029185578283, 37.51693263365818),
    (56.17022377062271, 37.51700237109257),
    (56.170121642655246, 37.51698359562948),
    (56.1699686372412, 37.51692458703114),
    (56.169638975997344, 37.51680053486421),
    (56.16936438536172, 37.51669592871262),
    (56.16929991405041, 37.51653509462058),
    (56.169337698501124, 37.51635471606432),
    (56.16945928187632, 37.516133988784865),
    (56.16955729650045, 37.51591789425098),
    (56.16954794397083, 37.51570264697753),
    (56.169473497753415, 37.5155101984807),
    (56.16937286419401, 37.51531305611811),
    (56.16928794273151, 37.51525203586303),
    (56.16920788443999, 37.5153103739091),
    (56.169137552718496, 37.51573013961993),
    (56.16909565290804, 37.51602786482057),
    (56.16905524947592, 37.51627865136347),
    (56.16899090318105, 37.51644293666563),
    (56.16889924693456, 37.51647780538283),
    (56.16881694317908, 37.51643824279985),
    (56.1686074419113, 37.516262558109396),
    (56.168362772906434, 37.51605401635849),
    (56.16829264019002, 37.51591051817619),
    (56.16830161891322, 37.51571605802259),
    (56.1683937859535, 37.515562929691136),
    (56.16857484508361, 37.515334941924884),
    (56.168765266981445, 37.515088526568),
    (56.16897561431987, 37.5148187631259)
)


def main():
    app = create_app()
    with app.app_context():
        db.drop_all()
        db.create_all()
        dt = datetime(2021, 1, 1, 0, 0, 0)
        for test_coordinate in TEST_KARTING_COORDINATES:
            coordinate = Coordinate(
                track_uuid=TEST_KARTING_UUID,
                latitude=test_coordinate[0],
                longitude=test_coordinate[1],
                datetime_at=dt
            )
            dt += TEST_KARTING_TIMEDELTA
            db.session.add(coordinate)
        db.session.commit()


if __name__ == '__main__':
    main()
